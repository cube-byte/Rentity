<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Reserva</title>
    <link rel="stylesheet" href="/Frontend/css/admin/layout.css">
    <link rel="stylesheet" href="/Frontend/css/admin/layout_2.css">
    <link rel="stylesheet" href="/Frontend/css/admin/Reserva_create.css">

</head>
<body>
    <nav class="navegador">
        <div class="nav_top">
            <div class="nav-logo">
                <img src="/Frontend/recursos/img/Rentity-Logo.png" alt="">
            </div>
            <div class="nav-title">
                <h1><b>RENTIFY</b> System</h1>
            </div>
        </div>
        <div class="nav_buttom">
            <ul>
                <a href="/Frontend/html/admin/Dashboard.html">
                    <li class="li-menu">
                        <svg class="nav_icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="#000000" viewBox="0 0 256 256"><path d="M219.31,108.68l-80-80a16,16,0,0,0-22.62,0l-80,80A15.87,15.87,0,0,0,32,120v96a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V120A15.87,15.87,0,0,0,219.31,108.68ZM208,208H48V120l80-80,80,80Z"></path></svg>
                        Dashboard
                    </li>
                </a>
                <li class="menu-item">
                    <div class="menu-link">
                        <svg class="nav_icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="#000000" viewBox="0 0 256 256"><path d="M240,104H229.2L201.42,41.5A16,16,0,0,0,186.8,32H69.2a16,16,0,0,0-14.62,9.5L26.8,104H16a8,8,0,0,0,0,16h8v80a16,16,0,0,0,16,16H64a16,16,0,0,0,16-16V184h96v16a16,16,0,0,0,16,16h24a16,16,0,0,0,16-16V120h8a8,8,0,0,0,0-16ZM69.2,48H186.8l24.89,56H44.31ZM64,200H40V184H64Zm128,0V184h24v16Zm24-32H40V120H216ZM56,144a8,8,0,0,1,8-8H80a8,8,0,0,1,0,16H64A8,8,0,0,1,56,144Zm112,0a8,8,0,0,1,8-8h16a8,8,0,0,1,0,16H176A8,8,0,0,1,168,144Z"></path></svg>
                        Vehiculos
                    </div>
                    <ul class="submenu">
                        <a href="/Frontend/html/admin/Vehiculos.html"><li>Vehiculos</li></a>
                        <a href="/Frontend/html/admin/Autos.html"><li>Autos</li></a>
                    </ul>
                </li>
                <li class="menu-item">
                    <div class="menu-link">
                        <svg class="nav_icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="#000000" viewBox="0 0 256 256"><path d="M104,216a16,16,0,1,1-16-16A16,16,0,0,1,104,216Zm88-16a16,16,0,1,0,16,16A16,16,0,0,0,192,200ZM239.71,74.14l-25.64,92.28A24.06,24.06,0,0,1,191,184H92.16A24.06,24.06,0,0,1,69,166.42L33.92,40H16a8,8,0,0,1,0-16H40a8,8,0,0,1,7.71,5.86L57.19,64H232a8,8,0,0,1,7.71,10.14ZM221.47,80H61.64l22.81,82.14A8,8,0,0,0,92.16,168H191a8,8,0,0,0,7.71-5.86Z"></path></svg>
                        Ventas
                    </div>
                    <ul class="submenu">
                        <a href="/Frontend/html/admin/Reservas.html"><li>Reservas</li></a>
                        <a href="#"><li>Pagos</li></a>
                        <a href="#"><li>Comprobantes</li></a>
                    </ul>
                </li>
                <li class="menu-item">
                    <div class="menu-link">
                        <svg class="nav_icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="#000000" viewBox="0 0 256 256"><path d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"></path></svg>
                        Clientes
                    </div>
                    <ul class="submenu">
                        <a href="/Frontend/html/admin/Usuarios.html"><li>Clientes</li></a>
                        <a href="/Frontend/html/admin/Ubicaciones.html"><li>Ubicaciones</li></a>
                    </ul>
                </li>
                <a href="/Frontend/html/user/Catalogo.html">
                    <li class="li-menu">
                        <svg class="nav_icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="#000000" viewBox="0 0 256 256"><path d="M128,24h0A104,104,0,1,0,232,128,104.12,104.12,0,0,0,128,24Zm88,104a87.61,87.61,0,0,1-3.33,24H174.16a157.44,157.44,0,0,0,0-48h38.51A87.61,87.61,0,0,1,216,128ZM102,168H154a115.11,115.11,0,0,1-26,45A115.27,115.27,0,0,1,102,168Zm-3.9-16a140.84,140.84,0,0,1,0-48h59.88a140.84,140.84,0,0,1,0,48ZM40,128a87.61,87.61,0,0,1,3.33-24H81.84a157.44,157.44,0,0,0,0,48H43.33A87.61,87.61,0,0,1,40,128ZM154,88H102a115.11,115.11,0,0,1,26-45A115.27,115.27,0,0,1,154,88Zm52.33,0H170.71a135.28,135.28,0,0,0-22.3-45.6A88.29,88.29,0,0,1,206.37,88ZM107.59,42.4A135.28,135.28,0,0,0,85.29,88H49.63A88.29,88.29,0,0,1,107.59,42.4ZM49.63,168H85.29a135.28,135.28,0,0,0,22.3,45.6A88.29,88.29,0,0,1,49.63,168Zm98.78,45.6a135.28,135.28,0,0,0,22.3-45.6h35.66A88.29,88.29,0,0,1,148.41,213.6Z"></path></svg>
                        Website
                    </li>
                </a>
                <a href="">
                    <li class="li-menu">
                        <svg class="nav_icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="#000000" viewBox="0 0 256 256"><path d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"></path></svg>
                        Configuracion
                    </li>
                </a>
                <a href="#" id="btn-cerrar-sesion">
                    <li class="li-menu">
                        <svg class="nav_icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="#000000" viewBox="0 0 256 256"><path d="M120,216a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V40a8,8,0,0,1,8-8h64a8,8,0,0,1,0,16H56V208h56A8,8,0,0,1,120,216Zm109.66-93.66-40-40a8,8,0,0,0-11.32,11.32L204.69,120H112a8,8,0,0,0,0,16h92.69l-26.35,26.34a8,8,0,0,0,11.32,11.32l40-40A8,8,0,0,0,229.66,122.34Z"></path></svg>
                        Salir
                    </li>
                </a>
            </ul>
        </div>
    </nav>
    <div class="container">
        <section class="container-top">
            <div class="perfil">
                <div class="perfil-correo">
                    <h1 class="correo" id="perfilEmail">cargando...</h1>
                    <h1 class="rango" id="perfilRol">-</h1>
                </div>
                <div class="perfil-img">
                    <img src="../../recursos/img/icons/person-icon.webp" alt="">
                </div>
            </div>
        </section>

        <section class="container-body">
            <div class="guia">
                <h2 class="main-guia">Dashboard</h2>
                <h2>/</h2>
                <h2 class="sub-guia">Ventas</h2>
                <h2>/</h2>
                <h2 class="sub-guia">Reservas</h2>
                <h2>/</h2>
                <h2 class="sub-guia">Crear</h2>
            </div>
            <div class="title">
                <h1>Crear Nueva Reserva</h1>
            </div>
            <div class="create-section">
                <form style="display: flex;flex-direction: column;">
                    <div class="from">

                        <div class="form-body">
                            <div class="cliente_select-box">

                                <h2 class="h2-box">Datos Cliente</h2>
                                <div class="buscar-cliente">
                                    <label></label>
                                    <input type="text" id="buscarCliente" placeholder="Ingrese ID del Cliente">
                                    <small class="hint">
                                        Al añadir la id del cliente, muestra datos en los inputs de abajo (Hacer funcion)
                                    </small>
                                </div>
                                <div class="cliente-box">
                                    <div class="nombre">
                                        <label>Nombres: *</label>
                                        <input type="text" id="inputNombres" placeholder="" required readonly>
                                    </div>
                                    <div class="email">
                                        <label>Correo: *</label>
                                        <input type="text" id="inputEmail" placeholder="" required readonly>
                                    </div>
                                    <div class="telefono">
                                        <label>Telefono: *</label>
                                        <input type="text" id="inputTelefono" placeholder="" required readonly>
                                    </div>
                                    <div class="dni">
                                        <label>DNI: *</label>
                                        <input type="text" id="inputDni" placeholder="" required readonly>
                                    </div>
                                </div>
                            </div>

                            <div class="vehiculo-box">

                                <h2 class="h2-box">Vehiculo Seleccionado</h2>
                                <div class="vehiculo-selector" id="vehiculoSelector">
                                    <div class="vehiculo-seleccionado" id="vehiculoSeleccionado">
                                        Selecciona un vehículo
                                    </div>
                                    <div class="vehiculo-opciones" id="vehiculoOpciones">

                                        <!--<div class="vehiculo-opcion" data-id="1">
                                                <img src="../../../recursos/img/autos/car_toyota_corolla.jpg">
                                                <div class="info">
                                                    <h3>Toyota Corolla</h3>
                                                    <p>2024 • SUV • Auto</p>
                                                    <span>S/ 100 por día</span>
                                                </div>
                                        </div>-->
                                    </div>
                                </div>
                                <input type="hidden" id="vehiculoId">
                            </div>

                            <div class="fecha-box">
                                <h2 class="h2-box">Selecciona las Fechas</h2>
                                <div class="fechas-reserva">
                                    <div class="campo">
                                        <label for="fechaInicio">Fecha de inicio</label>
                                        <input type="date" id="fechaInicio">
                                    </div>
                                    <div class="campo">
                                        <label for="fechaFin">Fecha fin</label>
                                        <input type="date" id="fechaFin">
                                    </div>
                                </div>
                                <small class="hint-fechas">
                                    Selecciona el rango de días para calcular el costo total.
                                </small>
                            </div>

                            <div class="precio-box">

                                <div class="precio-calculo">
                                    <span class="detalle" style="display: flex;">
                                        <p style="margin: 0px 5px;" id="dias-vista">0</p> días x S/   <p style="margin: 0px 5px;" id="precio-vista">0</p>  por día
                                    </span>
                                    <p class="subtotal" id="subtotal">S/ 0</p>
                                </div>

                                <div class="precio-total">
                                    <span>Total a pagar</span>
                                    <strong>S/ <span id="precio">0</span></strong>
                                </div>

                            </div>
                        </div>
                        <div class="button-box">
                            <button type="button" id="btnCancelar" class="btn btn-cancelar">
                                Cancelar
                            </button>

                            <button type="button" id="btnCrear" class="btn btn-primario">
                                Crear reserva
                            </button>
                        </div>
                </form>
            </div>
        </section>
    </div>
    

<script>
    const selector = document.getElementById("vehiculoSelector");
    const seleccionado = selector.querySelector(".vehiculo-seleccionado");
    const opciones = selector.querySelector(".vehiculo-opciones");
    const hidden = document.getElementById("vehiculoId");

    seleccionado.addEventListener("click", () => {
    opciones.style.display =
        opciones.style.display === "block" ? "none" : "block";
    });

    selector.querySelectorAll(".vehiculo-opcion").forEach(op => {
    op.addEventListener("click", () => {

        seleccionado.innerHTML = `
        <div class="vehiculo-card">
            <div class="vehiculo_rederizar-img">
                ${op.innerHTML}
            </div>  
        </div>
        `;

        hidden.value = op.dataset.id;
        opciones.style.display = "none";
    });
    });
</script>
<script>

const fechaInicio = document.getElementById("fechaInicio");
const fechaFin = document.getElementById("fechaFin");
const vistaDias = document.getElementById("dias-vista");
const vistaTotal = document.getElementById("precio");
const vistaPrecio = document.getElementById("precio-vista");

fechaInicio.addEventListener("change", calcular);
fechaFin.addEventListener("change", calcular);

function calcular() {

    const inicio = fechaInicio.value;
    const fin = fechaFin.value;

    if (!inicio || !fin) return;

    const fInicio = new Date(inicio);
    const fFin = new Date(fin);

    const diferenciaMs = fFin - fInicio;
    const dias = Math.ceil(diferenciaMs / 86400000);

    if(dias < 0){
        alert("No se puede poner fechas negativas")
        fechaFin.value = '';
    }else{
        
        const precioDia = parseFloat(vistaPrecio.textContent);

        const total = dias * precioDia;

        vistaDias.textContent = dias;
        vistaTotal.textContent = total;

        const vistaSubTotal = document.getElementById("subtotal");

        vistaSubTotal.textContent = "S/ " + total;

    }
}

</script>
    <script src="/Frontend/ts/menu.js"></script>
    <script src="/Frontend/js/extras/cargar_vehiculosDetallados.js"></script>
    <script src="/Frontend/js/createReservas.js"></script>
</body>
</html>